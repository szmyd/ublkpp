diff -Naur a/include/ublksrv_utils.h b/include/ublksrv_utils.h
--- a/include/ublksrv_utils.h	2025-04-17 09:40:36.000000000 +0000
+++ b/include/ublksrv_utils.h	2025-06-19 18:38:37.645834391 +0000
@@ -23,27 +23,6 @@
 static inline void ublksrv_printf(FILE *stream, const char *fmt, ...)
 	__attribute__ ((format (printf, 2, 3)));
 
-#ifdef DEBUG
-static inline void ublksrv_log(int priority, const char *fmt, ...)
-{
-    va_list ap;
-
-    va_start(ap, fmt);
-    vsyslog(priority, fmt, ap);
-}
-
-static inline void ublksrv_printf(FILE *stream, const char *fmt, ...)
-{
-    va_list ap;
-
-    va_start(ap, fmt);
-    vfprintf(stream, fmt, ap);
-}
-#else
-static inline void ublksrv_log(int priority, const char *fmt, ...) { }
-static inline void ublksrv_printf(FILE *stream, const char *fmt, ...) {}
-#endif
-
 /* 32bit debug mask, high 16 bits are for target code, and low 16 bits for lib */
 #define	UBLK_DBG_DEV		(1U << 0)
 #define	UBLK_DBG_QUEUE		(1U << 1)
@@ -51,19 +30,12 @@
 #define	UBLK_DBG_IO		(1U << 3)
 #define	UBLK_DBG_CTRL_CMD	(1U << 4)
 
-#ifdef DEBUG
 extern void ublk_dbg(int level, const char *fmt, ...)
 	__attribute__ ((format (printf, 2, 3)));
 extern void ublk_ctrl_dbg(int level, const char *fmt, ...)
 	__attribute__ ((format (printf, 2, 3)));
 extern void ublk_set_debug_mask(unsigned mask);
 extern unsigned ublk_get_debug_mask(unsigned mask);
-#else
-static inline void ublk_dbg(int level, const char *fmt, ...) { }
-static inline void ublk_ctrl_dbg(int level, const char *fmt, ...) { }
-static inline void ublk_set_debug_mask(unsigned mask) {}
-static inline unsigned ublk_get_debug_mask(unsigned mask) { return 0;}
-#endif
 
 extern void ublk_log(const char *fmt, ...)
 	__attribute__ ((format (printf, 1, 2)));
diff -Naur a/lib/utils.c b/lib/utils.c
--- a/lib/utils.c	2025-04-17 09:40:36.000000000 +0000
+++ b/lib/utils.c	2025-06-19 18:40:01.529518484 +0000
@@ -48,43 +48,7 @@
 	return ret;
 }
 
-void ublk_err(const char *fmt, ...)
-{
-	va_list ap;
-
-	va_start(ap, fmt);
-	vsyslog(LOG_ERR, fmt, ap);
-}
-
-void ublk_log(const char *fmt, ...)
-{
-	va_list ap;
-
-	va_start(ap, fmt);
-	vsyslog(LOG_INFO, fmt, ap);
-}
-
-#ifdef DEBUG
 static unsigned int ublk_debug_mask;
-void ublk_dbg(int level, const char *fmt, ...)
-{
-	if (level & ublk_debug_mask) {
-		va_list ap;
-
-		va_start(ap, fmt);
-		vsyslog(LOG_ERR, fmt, ap);
-	}
-}
-
-void ublk_ctrl_dbg(int level, const char *fmt, ...)
-{
-	if (level & ublk_debug_mask) {
-		va_list ap;
-
-		va_start(ap, fmt);
-		vfprintf(stdout, fmt, ap);
-	}
-}
 
 void ublk_set_debug_mask(unsigned mask)
 {
@@ -95,4 +59,3 @@
 {
 	return ublk_debug_mask;
 }
-#endif
diff -Naur a/Makefile.am b/Makefile.am
--- a/Makefile.am	2025-06-19 18:43:26.152621111 +0000
+++ b/Makefile.am	2025-06-19 18:43:56.281224641 +0000
@@ -7,62 +7,10 @@
 	.gitignore \
 	LICENSE
 
-SUBDIRS = doc include lib tests
+SUBDIRS = doc include lib
 
 AM_CXXFLAGS = -std=c++20 -Wunused
 
-TGT_DIR = targets
-TGT_INC = $(top_srcdir)/$(TGT_DIR)/include
-
-sbin_PROGRAMS = ublk ublk.null ublk.loop ublk.nbd ublk_user_id
-noinst_PROGRAMS = demo_null demo_event
-dist_sbin_SCRIPTS = utils/ublk_chown.sh utils/ublk_chown_docker.sh
-
-if HAVE_LIBNFS
-sbin_PROGRAMS += ublk.nfs
-endif
-
-ublk_SOURCES = $(TGT_DIR)/ublk.cpp $(TGT_DIR)/ublksrv_tgt.cpp
-
-ublk_CFLAGS = $(WARNINGS_CFLAGS) $(LIBURING_CFLAGS) $(PTHREAD_CFLAGS)
-ublk_CPPFLAGS = $(ublk_CFLAGS) -I$(top_srcdir)/include -I$(TGT_INC)
-ublk_LDADD = lib/libublksrv.la $(LIBURING_LIBS) $(PTHREAD_LIBS) -lstdc++
-
-ublk_null_SOURCES = $(TGT_DIR)/ublk.null.cpp $(TGT_DIR)/ublksrv_tgt.cpp
-ublk_null_CFLAGS = $(WARNINGS_CFLAGS) $(LIBURING_CFLAGS) $(PTHREAD_CFLAGS)
-ublk_null_CPPFLAGS = $(ublk_null_CFLAGS) -I$(top_srcdir)/include -I$(TGT_INC)
-ublk_null_LDADD = lib/libublksrv.la $(LIBURING_LIBS) $(PTHREAD_LIBS) -lstdc++
-
-ublk_loop_SOURCES = $(TGT_DIR)/ublk.loop.cpp $(TGT_DIR)/ublksrv_tgt.cpp
-ublk_loop_CFLAGS = $(WARNINGS_CFLAGS) $(LIBURING_CFLAGS) $(PTHREAD_CFLAGS)
-ublk_loop_CPPFLAGS = $(ublk_loop_CFLAGS) -I$(top_srcdir)/include -I$(TGT_INC)
-ublk_loop_LDADD = lib/libublksrv.la $(LIBURING_LIBS) $(PTHREAD_LIBS) -lstdc++
-
-ublk_nbd_SOURCES = $(TGT_DIR)/nbd/ublk.nbd.cpp $(TGT_DIR)/nbd/cliserv.c $(TGT_DIR)/nbd/nbd-client.c $(TGT_DIR)/ublksrv_tgt.cpp
-ublk_nbd_CFLAGS = $(WARNINGS_CFLAGS) $(LIBURING_CFLAGS) $(PTHREAD_CFLAGS)
-ublk_nbd_CPPFLAGS = $(ublk_nbd_CFLAGS) -I$(top_srcdir)/include -I$(TGT_INC)
-ublk_nbd_LDADD = lib/libublksrv.la $(LIBURING_LIBS) $(PTHREAD_LIBS) -lstdc++
-
-ublk_nfs_SOURCES = $(TGT_DIR)/ublk.nfs.cpp $(TGT_DIR)/ublksrv_tgt.cpp
-ublk_nfs_CFLAGS = $(WARNINGS_CFLAGS) $(LIBURING_CFLAGS) $(PTHREAD_CFLAGS)
-ublk_nfs_CPPFLAGS = $(ublk_nfs_CFLAGS) -I$(top_srcdir)/include -I$(TGT_INC)
-ublk_nfs_LDADD = lib/libublksrv.la $(LIBURING_LIBS) $(PTHREAD_LIBS) -lstdc++ -lnfs
-
-demo_null_SOURCES = demo_null.c
-demo_null_CFLAGS = $(WARNINGS_CFLAGS) $(LIBURING_CFLAGS) $(PTHREAD_CFLAGS)
-demo_null_CPPFLAGS = $(demo_null_CFLAGS) -I$(top_srcdir)/include
-demo_null_LDADD = lib/libublksrv.la $(LIBURING_LIBS) $(PTHREAD_LIBS) -lstdc++
-
-demo_event_SOURCES = demo_event.c
-demo_event_CFLAGS = $(WARNINGS_CFLAGS) $(LIBURING_CFLAGS) $(PTHREAD_CFLAGS)
-demo_event_CPPFLAGS = $(demo_event_CFLAGS) -I$(top_srcdir)/include
-demo_event_LDADD = lib/libublksrv.la $(LIBURING_LIBS) $(PTHREAD_LIBS) -lstdc++
-
-ublk_user_id_SOURCES = utils/ublk_user_id.c
-ublk_user_id_CFLAGS = $(WARNINGS_CFLAGS) $(LIBURING_CFLAGS) $(PTHREAD_CFLAGS)
-ublk_user_id_CPPFLAGS = $(ublk_user_id_CFLAGS) -I$(top_srcdir)/include
-ublk_user_id_LDADD = lib/libublksrv.la $(LIBURING_LIBS) $(PTHREAD_LIBS) -lstdc++
-
 pkgconfigdir = $(libdir)/pkgconfig
 pkgconfig_DATA = ublksrv.pc
 
